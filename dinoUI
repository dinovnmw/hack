-- Fluent UI Roblox Library - Upgraded Version
-- Super beautiful animations, layouts, functions like RayField/Fluent.
-- Added: Acrylic simulation, themes, icons for tabs, more animations (fade-in, hover scale), more elements.
-- Config save/load/import with Options table.
-- Draggable, toggle icon/keybind, notifications.

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local HttpService = game:GetService("HttpService")
local CoreGui = game:GetService("CoreGui")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

local Fluent = {}
Fluent.Version = "2.0"
Fluent.Themes = {"Dark", "Light", "Aqua"}
Fluent.Theme = "Dark"
Fluent.Accent = Color3.fromRGB(0, 140, 255)
Fluent.Acrylic = false
Fluent.Transparency = true
Fluent.MinimizeKey = Enum.KeyCode.RightShift
Fluent.Options = {}
Fluent.ConfigFolder = "FluentConfigs"

local ThemeColors = {
    Dark = {
        Main = Color3.fromRGB(20, 20, 20),
        Sidebar = Color3.fromRGB(28, 28, 28),
        Item = Color3.fromRGB(32, 32, 32),
        Text = Color3.fromRGB(240, 240, 240),
        SubText = Color3.fromRGB(160, 160, 160),
        Outline = Color3.fromRGB(50, 50, 50)
    },
    Light = {
        Main = Color3.fromRGB(240, 240, 240),
        Sidebar = Color3.fromRGB(220, 220, 220),
        Item = Color3.fromRGB(200, 200, 200),
        Text = Color3.fromRGB(20, 20, 20),
        SubText = Color3.fromRGB(100, 100, 100),
        Outline = Color3.fromRGB(180, 180, 180)
    },
    Aqua = {
        Main = Color3.fromRGB(0, 50, 50),
        Sidebar = Color3.fromRGB(0, 60, 60),
        Item = Color3.fromRGB(0, 70, 70),
        Text = Color3.fromRGB(240, 240, 240),
        SubText = Color3.fromRGB(180, 180, 180),
        Outline = Color3.fromRGB(0, 100, 100)
    }
}

-- Utility
local function GetTheme()
    return ThemeColors[Fluent.Theme]
end

local function Tween(obj, props, time, style)
    TweenService:Create(obj, TweenInfo.new(time or 0.3, style or Enum.EasingStyle.Quart, Enum.EasingDirection.Out), props):Play()
end

local function Ripple(parent)
    local rip = Instance.new("Frame")
    rip.BackgroundColor3 = Fluent.Accent
    rip.Size = UDim2.new(0,0,0,0)
    rip.AnchorPoint = Vector2.new(0.5,0.5)
    rip.BackgroundTransparency = 0.5
    rip.Parent = parent
    Instance.new("UICorner", rip).CornerRadius = UDim.new(1,0)
    local pos = Mouse.X - parent.AbsolutePosition.X, Mouse.Y - parent.AbsolutePosition.Y
    rip.Position = UDim2.fromOffset(pos.X, pos.Y)
    Tween(rip, {Size = UDim2.fromOffset(300,300), BackgroundTransparency = 1}, 0.5, Enum.EasingStyle.Linear)
    task.delay(0.5, function() rip:Destroy() end)
end

local function MakeDraggable(frame, dragHandle)
    local dragging, dragInput, dragStart, startPos
    dragHandle.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    dragHandle.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - dragStart
            Tween(frame, {Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)}, 0.05)
        end
    end)
end

-- Notification
local NotifHolder
function Fluent:Notify(options)
    if not NotifHolder then return end
    local title = options.Title or "Notification"
    local content = options.Content or ""
    local duration = options.Duration or 3
    local callback = options.Callback or function() end
    local Notif = Instance.new("Frame")
    Notif.Size = UDim2.fromOffset(250, 60)
    Notif.Position = UDim2.new(1, 10, 1, -70)
    Notif.BackgroundColor3 = GetTheme().Main
    Notif.BackgroundTransparency = 0.2
    Notif.BorderSizePixel = 0
    Notif.Parent = NotifHolder
    Instance.new("UICorner", Notif).CornerRadius = UDim.new(0, 8)
    local Stroke = Instance.new("UIStroke", Notif)
    Stroke.Color = GetTheme().Outline
    Stroke.Transparency = 0.5
    local Line = Instance.new("Frame", Notif)
    Line.Size = UDim2.new(0, 3, 1, -10)
    Line.Position = UDim2.fromOffset(5, 5)
    Line.BackgroundColor3 = Fluent.Accent
    Instance.new("UICorner", Line).CornerRadius = UDim.new(1,0)
    local T = Instance.new("TextLabel", Notif)
    T.Text = title
    T.Font = Enum.Font.GothamBold
    T.TextSize = 14
    T.TextColor3 = GetTheme().Text
    T.Position = UDim2.fromOffset(15, 8)
    T.Size = UDim2.new(1, -20, 0, 20)
    T.TextXAlignment = Enum.TextXAlignment.Left
    T.BackgroundTransparency = 1
    local D = Instance.new("TextLabel", Notif)
    D.Text = content
    D.Font = Enum.Font.Gotham
    D.TextSize = 12
    D.TextColor3 = GetTheme().SubText
    D.Position = UDim2.fromOffset(15, 28)
    D.Size = UDim2.new(1, -20, 0, 20)
    D.TextXAlignment = Enum.TextXAlignment.Left
    D.BackgroundTransparency = 1
    Tween(Notif, {Position = UDim2.new(1, -260, 1, -70 - (#NotifHolder:GetChildren()-1)*65)}, 0.5)
    task.delay(duration, function()
        Tween(Notif, {Position = UDim2.new(1, 20, Notif.Position.Y.Scale, Notif.Position.Y.Offset)}, 0.5)
        task.wait(0.5)
        Notif:Destroy()
        callback()
    end)
end

-- Theme Functions
function Fluent:SetTheme(newTheme)
    if table.find(Fluent.Themes, newTheme) then
        Fluent.Theme = newTheme
        -- To update UI, would need a refresh function for all elements
    end
end

function Fluent:ToggleAcrylic(value)
    Fluent.Acrylic = value
    -- Simulate with transparency or blur if possible
end

function Fluent:ToggleTransparency(value)
    Fluent.Transparency = value
    -- Set for main frames
end

-- Config
function Fluent:SaveConfig(configName)
    local config = {}
    for flag, opt in pairs(Fluent.Options) do
        config[flag] = opt.Value
    end
    writefile(Fluent.ConfigFolder .. "/" .. configName .. ".json", HttpService:JSONEncode(config))
end

function Fluent:LoadConfig(configName)
    if isfile(Fluent.ConfigFolder .. "/" .. configName .. ".json") then
        local data = HttpService:JSONDecode(readfile(Fluent.ConfigFolder .. "/" .. configName .. ".json"))
        for flag, value in pairs(data) do
            if Fluent.Options[flag] then
                Fluent.Options[flag]:Set(value)
            end
        end
    end
end

function Fluent:ImportConfig(jsonString)
    local data = HttpService:JSONDecode(jsonString)
    for flag, value in pairs(data) do
        if Fluent.Options[flag] then
            Fluent.Options[flag]:Set(value)
        end
    end
end

-- Create Window
function Fluent:CreateWindow(options)
    local Window = {}
    local title = options.Title or "Fluent UI"
    local subTitle = options.SubTitle or ""
    local tabWidth = options.TabWidth or 140
    local size = options.Size or UDim2.fromOffset(580, 400)
    local minimizeKey = options.MinimizeKey or Fluent.MinimizeKey
    Fluent.MinimizeKey = minimizeKey
    Fluent.Acrylic = options.Acrylic or Fluent.Acrylic
    Fluent.Theme = options.Theme or Fluent.Theme
    local theme = GetTheme()

    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "FluentUI"
    if pcall(function() ScreenGui.Parent = CoreGui end) then else ScreenGui.Parent = LocalPlayer.PlayerGui end
    NotifHolder = Instance.new("Frame", ScreenGui)
    NotifHolder.Size = UDim2.fromScale(1,1)
    NotifHolder.BackgroundTransparency = 1
    NotifHolder.Position = UDim2.new(0,0,0, -20)

    local Main = Instance.new("Frame", ScreenGui)
    Main.Size = size
    Main.Position = UDim2.fromScale(0.5, 0.5)
    Main.AnchorPoint = Vector2.new(0.5, 0.5)
    Main.BackgroundColor3 = theme.Main
    Main.BackgroundTransparency = Fluent.Transparency and 0.05 or 0
    Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 10)
    Main.Visible = true
    Tween(Main, {BackgroundTransparency = Fluent.Transparency and 0.05 or 0}, 0.5, Enum.EasingStyle.Sine)

    local Shadow = Instance.new("ImageLabel", Main)
    Shadow.Size = UDim2.new(1, 40, 1, 40)
    Shadow.Position = UDim2.fromOffset(-20, -20)
    Shadow.Image = "rbxassetid://6015897843"
    Shadow.ImageColor3 = Color3.new(0,0,0)
    Shadow.ImageTransparency = 0.4
    Shadow.BackgroundTransparency = 1
    Shadow.ZIndex = -1
    Shadow.ScaleType = Enum.ScaleType.Slice
    Shadow.SliceCenter = Rect.new(49, 49, 450, 450)

    local Stroke = Instance.new("UIStroke", Main)
    Stroke.Thickness = 1
    Stroke.Color = Color3.fromRGB(255, 255, 255)
    local StrokeGrad = Instance.new("UIGradient", Stroke)
    StrokeGrad.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Fluent.Accent),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(60,60,60))
    }
    StrokeGrad.Rotation = 45

    local TopBar = Instance.new("Frame", Main)
    TopBar.Size = UDim2.new(1,0,0,40)
    TopBar.BackgroundTransparency = 1
    MakeDraggable(Main, TopBar)

    local TitleLabel = Instance.new("TextLabel", TopBar)
    TitleLabel.Text = title .. (subTitle ~= "" and " - " .. subTitle or "")
    TitleLabel.Font = Enum.Font.GothamBold
    TitleLabel.TextColor3 = theme.Text
    TitleLabel.TextSize = 16
    TitleLabel.Position = UDim2.fromOffset(15,0)
    TitleLabel.Size = UDim2.new(1,-100,1,0)
    TitleLabel.BackgroundTransparency = 1
    TitleLabel.TextXAlignment = Enum.TextXAlignment.Left

    local ToggleBtn = Instance.new("TextButton", TopBar)
    ToggleBtn.Text = "X"
    ToggleBtn.Size = UDim2.fromOffset(30, 30)
    ToggleBtn.Position = UDim2.new(1, -40, 0, 5)
    ToggleBtn.BackgroundTransparency = 1
    ToggleBtn.TextColor3 = theme.Text
    ToggleBtn.Font = Enum.Font.GothamBold
    ToggleBtn.TextSize = 14
    ToggleBtn.MouseButton1Click:Connect(function()
        Main.Visible = not Main.Visible
    end)

    UserInputService.InputBegan:Connect(function(input)
        if input.KeyCode == Fluent.MinimizeKey then
            Main.Visible = not Main.Visible
        end
    end)

    local Sidebar = Instance.new("ScrollingFrame", Main)
    Sidebar.Size = UDim2.new(0, tabWidth, 1, -50)
    Sidebar.Position = UDim2.fromOffset(10, 45)
    Sidebar.BackgroundColor3 = theme.Sidebar
    Sidebar.ScrollBarThickness = 0
    Instance.new("UICorner", Sidebar).CornerRadius = UDim.new(0, 8)
    local TabList = Instance.new("UIListLayout", Sidebar)
    TabList.Padding = UDim.new(0, 6)
    Instance.new("UIPadding", Sidebar).PaddingTop = UDim.new(0,8)

    local PageHolder = Instance.new("Frame", Main)
    PageHolder.Size = UDim2.new(1, -tabWidth - 25, 1, -50)
    PageHolder.Position = UDim2.fromOffset(tabWidth + 15, 45)
    PageHolder.BackgroundTransparency = 1

    function Window:AddTab(options)
        local Tab = {}
        local name = options.Title or "Tab"
        local icon = options.Icon or ""  -- rbxassetid:// or http

        local TabBtn = Instance.new("TextButton", Sidebar)
        TabBtn.Size = UDim2.new(1, 0, 0, 32)
        TabBtn.BackgroundTransparency = 1
        TabBtn.TextColor3 = theme.SubText
        TabBtn.Font = Enum.Font.GothamMedium
        TabBtn.TextSize = 13
        TabBtn.TextXAlignment = Enum.TextXAlignment.Left
        Instance.new("UIPadding", TabBtn).PaddingLeft = UDim.new(0, 30)

        if icon ~= "" then
            local IconLabel = Instance.new("ImageLabel", TabBtn)
            IconLabel.Size = UDim2.fromOffset(20, 20)
            IconLabel.Position = UDim2.fromOffset(-25, 6)
            IconLabel.BackgroundTransparency = 1
            IconLabel.Image = icon
            TabBtn.Text = name
        else
            TabBtn.Text = name
        end

        local Page = Instance.new("ScrollingFrame", PageHolder)
        Page.Size = UDim2.fromScale(1,1)
        Page.BackgroundTransparency = 1
        Page.ScrollBarThickness = 2
        Page.ScrollBarImageColor3 = Fluent.Accent
        Page.Visible = false
        local PageList = Instance.new("UIListLayout", Page)
        PageList.Padding = UDim.new(0, 8)
        PageList:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
            Page.CanvasSize = UDim2.new(0,0,0,PageList.AbsoluteContentSize.Y + 10)
        end)

        TabBtn.MouseButton1Click:Connect(function()
            for _, v in pairs(Sidebar:GetChildren()) do
                if v:IsA("TextButton") then
                    Tween(v, {TextColor3 = theme.SubText})
                end
            end
            Tween(TabBtn, {TextColor3 = theme.Text})
            for _, p in pairs(PageHolder:GetChildren()) do
                p.Visible = false
            end
            Page.Visible = true
            Page.Position = UDim2.fromOffset(20, 0)
            Tween(Page, {Position = UDim2.fromOffset(0, 0)}, 0.3, Enum.EasingStyle.Quint)
            Page.BackgroundTransparency = 1
            Tween(Page, {BackgroundTransparency = 0}, 0.3)
        end)

        function Tab:AddSection(options)
            local name = options.Title or "Section"
            local Section = Instance.new("Frame", Page)
            Section.Size = UDim2.new(1, -5, 0, 0)
            Section.BackgroundColor3 = theme.Item
            Instance.new("UICorner", Section).CornerRadius = UDim.new(0, 6)
            local Title = Instance.new("TextLabel", Section)
            Title.Text = name
            Title.Font = Enum.Font.GothamBold
            Title.TextColor3 = theme.Text
            Title.TextSize = 15
            Title.Size = UDim2.new(1,0,0,25)
            Title.Position = UDim2.fromOffset(10,5)
            Title.BackgroundTransparency = 1
            Title.TextXAlignment = Enum.TextXAlignment.Left
            local SectionContent = Instance.new("Frame", Section)
            SectionContent.Size = UDim2.new(1,0,1,-30)
            SectionContent.Position = UDim2.fromOffset(0,30)
            SectionContent.BackgroundTransparency = 1
            local SectionList = Instance.new("UIListLayout", SectionContent)
            SectionList.Padding = UDim.new(0, 5)
            Instance.new("UIPadding", SectionContent).PaddingLeft = UDim.new(0,10)
            SectionList:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
                Section.Size = UDim2.new(1, -5, 0, SectionList.AbsoluteContentSize.Y + 40)
            end)
            return SectionContent  -- Return content frame for adding elements
        end

        function Tab:AddParagraph(options)
            local title = options.Title or "Paragraph"
            local content = options.Content or ""
            local Frame = Instance.new("Frame", Page)
            Frame.Size = UDim2.new(1, -5, 0, 50)
            Frame.BackgroundTransparency = 1
            local TitleLbl = Instance.new("TextLabel", Frame)
            TitleLbl.Text = title
            TitleLbl.Font = Enum.Font.GothamBold
            TitleLbl.TextColor3 = theme.Text
            TitleLbl.TextSize = 14
            TitleLbl.Size = UDim2.new(1,0,0,20)
            TitleLbl.BackgroundTransparency = 1
            local ContentLbl = Instance.new("TextLabel", Frame)
            ContentLbl.Text = content
            ContentLbl.Font = Enum.Font.Gotham
            ContentLbl.TextColor3 = theme.SubText
            ContentLbl.TextSize = 12
            ContentLbl.Size = UDim2.new(1,0,0,30)
            ContentLbl.Position = UDim2.fromOffset(0,20)
            ContentLbl.BackgroundTransparency = 1
            ContentLbl.TextWrapped = true
            ContentLbl.TextYAlignment = Enum.TextYAlignment.Top
            ContentLbl:GetPropertyChangedSignal("TextBounds"):Connect(function()
                Frame.Size = UDim2.new(1,-5,0,20 + ContentLbl.TextBounds.Y + 10)
            end)
            return Frame
        end

        function Tab:AddButton(options)
            local text = options.Title or "Button"
            local desc = options.Description or ""
            local callback = options.Callback or function() end
            local flag = options.Flag or ""
            local Btn = Instance.new("TextButton", Page)
            Btn.Text = text
            Btn.Size = UDim2.new(1, -5, 0, desc == "" and 38 or 50)
            Btn.BackgroundColor3 = theme.Item
            Btn.TextColor3 = theme.Text
            Btn.Font = Enum.Font.Gotham
            Btn.TextSize = 14
            Btn.AutoButtonColor = false
            Instance.new("UICorner", Btn).CornerRadius = UDim.new(0, 6)
            if desc ~= "" then
                local DescLbl = Instance.new("TextLabel", Btn)
                DescLbl.Text = desc
                DescLbl.Font = Enum.Font.Gotham
                DescLbl.TextColor3 = theme.SubText
                DescLbl.TextSize = 12
                DescLbl.Position = UDim2.fromOffset(10,20)
                DescLbl.Size = UDim2.new(1,-20,0,20)
                DescLbl.BackgroundTransparency = 1
                DescLbl.TextXAlignment = Enum.TextXAlignment.Left
                Btn.TextYAlignment = Enum.TextYAlignment.Top
                Btn.Text = "  " .. text
            end
            Btn.MouseEnter:Connect(function()
                Tween(Btn, {BackgroundColor3 = Color3.fromRGB(theme.Item.R * 255 + 13, theme.Item.G * 255 + 13, theme.Item.B * 255 + 13)})
                Tween(Btn, {Size = Btn.Size + UDim2.fromOffset(4,4), Position = Btn.Position - UDim2.fromOffset(2,2)}, 0.2, Enum.EasingStyle.Quad)
            end)
            Btn.MouseLeave:Connect(function()
                Tween(Btn, {BackgroundColor3 = theme.Item})
                Tween(Btn, {Size = Btn.Size - UDim2.fromOffset(4,4), Position = Btn.Position + UDim2.fromOffset(2,2)}, 0.2, Enum.EasingStyle.Quad)
            end)
            Btn.MouseButton1Click:Connect(function()
                Ripple(Btn)
                Tween(Btn, {TextSize = 12}, 0.1)
                task.wait(0.1)
                Tween(Btn, {TextSize = 14}, 0.1)
                callback()
            end)
            if flag ~= "" then
                Fluent.Options[flag] = Btn
            end
            return Btn
        end

        function Tab:AddToggle(options)
            local text = options.Title or "Toggle"
            local desc = options.Description or ""
            local default = options.Default or false
            local callback = options.Callback or function(v) end
            local flag = options.Flag or text
            local Toggled = default
            local Toggle = {Value = Toggled}
            Fluent.Options[flag] = Toggle
            local Frame = Instance.new("TextButton", Page)
            Frame.Text = ""
            Frame.BackgroundColor3 = theme.Item
            Frame.Size = UDim2.new(1, -5, 0, desc == "" and 38 or 50)
            Frame.AutoButtonColor = false
            Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 6)
            local Lbl = Instance.new("TextLabel", Frame)
            Lbl.Text = text
            Lbl.Font = Enum.Font.Gotham
            Lbl.TextColor3 = theme.Text
            Lbl.TextSize = 14
            Lbl.BackgroundTransparency = 1
            Lbl.Position = UDim2.fromOffset(10, desc == "" and 0 or 5)
            Lbl.Size = UDim2.new(1,-60,0, desc == "" and 38 or 20)
            Lbl.TextXAlignment = Enum.TextXAlignment.Left
            Lbl.TextYAlignment = Enum.TextYAlignment.Center
            if desc ~= "" then
                local DescLbl = Instance.new("TextLabel", Frame)
                DescLbl.Text = desc
                DescLbl.Font = Enum.Font.Gotham
                DescLbl.TextColor3 = theme.SubText
                DescLbl.TextSize = 12
                DescLbl.Position = UDim2.fromOffset(10,25)
                DescLbl.Size = UDim2.new(1,-60,0,20)
                DescLbl.BackgroundTransparency = 1
                DescLbl.TextXAlignment = Enum.TextXAlignment.Left
            end
            local Switch = Instance.new("Frame", Frame)
            Switch.Size = UDim2.fromOffset(36, 18)
            Switch.Position = UDim2.new(1, -46, 0.5, -9)
            Switch.BackgroundColor3 = Toggled and Fluent.Accent or Color3.fromRGB(50,50,50)
            Instance.new("UICorner", Switch).CornerRadius = UDim.new(1,0)
            local Dot = Instance.new("Frame", Switch)
            Dot.Size = UDim2.fromOffset(14,14)
            Dot.Position = Toggled and UDim2.new(1,-16,0.5,-7) or UDim2.new(0,2,0.5,-7)
            Dot.BackgroundColor3 = Color3.new(1,1,1)
            Instance.new("UICorner", Dot).CornerRadius = UDim.new(1,0)
            Frame.MouseButton1Click:Connect(function()
                Toggled = not Toggled
                Toggle.Value = Toggled
                Tween(Switch, {BackgroundColor3 = Toggled and Fluent.Accent or Color3.fromRGB(50,50,50)})
                Tween(Dot, {Position = Toggled and UDim2.new(1,-16,0.5,-7) or UDim2.new(0,2,0.5,-7)})
                callback(Toggled)
            end)
            function Toggle:Set(val)
                Toggled = val
                Toggle.Value = val
                Tween(Switch, {BackgroundColor3 = val and Fluent.Accent or Color3.fromRGB(50,50,50)})
                Tween(Dot, {Position = val and UDim2.new(1,-16,0.5,-7) or UDim2.new(0,2,0.5,-7)})
            end
            return Toggle
        end

        function Tab:AddDropdown(options)
            local text = options.Title or "Dropdown"
            local desc = options.Description or ""
            local values = options.Options or {}
            local default = options.Default or values[1]
            local multi = options.Multi or false
            local callback = options.Callback or function(v) end
            local flag = options.Flag or text
            local Selected = multi and {} or default
            local Drop = {Value = Selected}
            Fluent.Options[flag] = Drop
            local DropFrame = Instance.new("Frame", Page)
            DropFrame.BackgroundColor3 = theme.Item
            DropFrame.Size = UDim2.new(1, -5, 0, desc == "" and 38 or 50)
            DropFrame.ClipsDescendants = true
            Instance.new("UICorner", DropFrame).CornerRadius = UDim.new(0, 6)
            local Btn = Instance.new("TextButton", DropFrame)
            Btn.Size = UDim2.new(1, 0, 0, desc == "" and 38 or 50)
            Btn.BackgroundTransparency = 1
            Btn.TextColor3 = theme.Text
            Btn.Font = Enum.Font.Gotham
            Btn.TextSize = 14
            Btn.TextXAlignment = Enum.TextXAlignment.Left
            Instance.new("UIPadding", Btn).PaddingLeft = UDim.new(0, 10)
            Btn.Text = text .. ": " .. (multi and "None" or default) .. " [V]"
            if desc ~= "" then
                local DescLbl = Instance.new("TextLabel", DropFrame)
                DescLbl.Text = desc
                DescLbl.Font = Enum.Font.Gotham
                DescLbl.TextColor3 = theme.SubText
                DescLbl.TextSize = 12
                DescLbl.Position = UDim2.fromOffset(10,25)
                DescLbl.Size = UDim2.new(1,-20,0,20)
                DescLbl.BackgroundTransparency = 1
                DescLbl.TextXAlignment = Enum.TextXAlignment.Left
                Btn.Size = UDim2.new(1,0,0,25)
                Btn.TextYAlignment = Enum.TextYAlignment.Top
            end
            local Opened = false
            local ListHeight = #values * 30
            Btn.MouseButton1Click:Connect(function()
                Opened = not Opened
                Tween(DropFrame, {Size = Opened and UDim2.new(1, -5, 0, (desc == "" and 38 or 50) + ListHeight + 5) or UDim2.new(1, -5, 0, desc == "" and 38 or 50)})
                Btn.Text = text .. ": " .. (multi and table.concat(Selected, ", ") or Selected) .. (Opened and " [^]" or " [V]")
            end)
            for i, v in ipairs(values) do
                local Opt = Instance.new("TextButton", DropFrame)
                Opt.Text = v
                Opt.Size = UDim2.new(1, -10, 0, 25)
                Opt.Position = UDim2.fromOffset(5, (desc == "" and 38 or 50) + (i-1)*30)
                Opt.BackgroundColor3 = theme.Sidebar
                Opt.TextColor3 = theme.SubText
                Opt.Font = Enum.Font.Gotham
                Opt.TextSize = 13
                Instance.new("UICorner", Opt).CornerRadius = UDim.new(0, 4)
                Opt.MouseButton1Click:Connect(function()
                    if multi then
                        if table.find(Selected, v) then
                            table.remove(Selected, table.find(Selected, v))
                        else
                            table.insert(Selected, v)
                        end
                    else
                        Selected = v
                        Opened = false
                        Tween(DropFrame, {Size = UDim2.new(1, -5, 0, desc == "" and 38 or 50)})
                    end
                    Drop.Value = Selected
                    Btn.Text = text .. ": " .. (multi and table.concat(Selected, ", ") or Selected) .. " [V]"
                    callback(Selected)
                end)
            end
            function Drop:Set(val)
                Selected = val
                Drop.Value = val
                Btn.Text = text .. ": " .. (multi and table.concat(val, ", ") or val) .. " [V]"
            end
            return Drop
        end

        function Tab:AddSlider(options)
            local text = options.Title or "Slider"
            local desc = options.Description or ""
            local min = options.Min or 0
            local max = options.Max or 100
            local default = options.Default or min
            local step = options.Step or 1
            local callback = options.Callback or function(v) end
            local flag = options.Flag or text
            local Value = default
            local Slider = {Value = Value}
            Fluent.Options[flag] = Slider
            local Frame = Instance.new("Frame", Page)
            Frame.BackgroundColor3 = theme.Item
            Frame.Size = UDim2.new(1, -5, 0, desc == "" and 50 or 65)
            Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 6)
            local Lbl = Instance.new("TextLabel", Frame)
            Lbl.Text = text .. ": " .. Value
            Lbl.Font = Enum.Font.Gotham
            Lbl.TextColor3 = theme.Text
            Lbl.TextSize = 14
            Lbl.BackgroundTransparency = 1
            Lbl.Position = UDim2.fromOffset(10, desc == "" and 5 or 5)
            Lbl.Size = UDim2.new(1,-20,0,20)
            Lbl.TextXAlignment = Enum.TextXAlignment.Left
            if desc ~= "" then
                local DescLbl = Instance.new("TextLabel", Frame)
                DescLbl.Text = desc
                DescLbl.Font = Enum.Font.Gotham
                DescLbl.TextColor3 = theme.SubText
                DescLbl.TextSize = 12
                DescLbl.Position = UDim2.fromOffset(10,25)
                DescLbl.Size = UDim2.new(1,-20,0,20)
                DescLbl.BackgroundTransparency = 1
                DescLbl.TextXAlignment = Enum.TextXAlignment.Left
            end
            local SliderBar = Instance.new("Frame", Frame)
            SliderBar.Size = UDim2.new(1, -20, 0, 6)
            SliderBar.Position = UDim2.fromOffset(10, desc == "" and 30 or 45)
            SliderBar.BackgroundColor3 = Color3.fromRGB(50,50,50)
            Instance.new("UICorner", SliderBar).CornerRadius = UDim.new(1,0)
            local Fill = Instance.new("Frame", SliderBar)
            Fill.Size = UDim2.new((Value - min)/(max - min), 0, 1, 0)
            Fill.BackgroundColor3 = Fluent.Accent
            Instance.new("UICorner", Fill).CornerRadius = UDim.new(1,0)
            local dragging = false
            SliderBar.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    dragging = true
                end
            end)
            SliderBar.InputEnded:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    dragging = false
                end
            end)
            UserInputService.InputChanged:Connect(function(input)
                if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
                    local relativeX = math.clamp((input.Position.X - SliderBar.AbsolutePosition.X) / SliderBar.AbsoluteSize.X, 0, 1)
                    Value = min + math.round((max - min) * relativeX / step) * step
                    Slider.Value = Value
                    Fill.Size = UDim2.new(relativeX, 0, 1, 0)
                    Lbl.Text = text .. ": " .. Value
                    callback(Value)
                end
            end)
            function Slider:Set(val)
                Value = math.clamp(math.round(val / step) * step, min, max)
                Slider.Value = Value
                Fill.Size = UDim2.new((Value - min)/(max - min), 0, 1, 0)
                Lbl.Text = text .. ": " .. Value
            end
            return Slider
        end

        function Tab:AddColorPicker(options)
            local text = options.Title or "ColorPicker"
            local desc = options.Description or ""
            local default = options.Default or Color3.fromRGB(255,255,255)
            local callback = options.Callback or function(c) end
            local flag = options.Flag or text
            local Color = default
            local Picker = {Value = Color}
            Fluent.Options[flag] = Picker
            local Frame = Instance.new("Frame", Page)
            Frame.BackgroundColor3 = theme.Item
            Frame.Size = UDim2.new(1, -5, 0, desc == "" and 38 or 50)
            Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 6)
            local Lbl = Instance.new("TextLabel", Frame)
            Lbl.Text = text
            Lbl.Font = Enum.Font.Gotham
            Lbl.TextColor3 = theme.Text
            Lbl.TextSize = 14
            Lbl.BackgroundTransparency = 1
            Lbl.Position = UDim2.fromOffset(10, desc == "" and 0 or 5)
            Lbl.Size = UDim2.new(1,-60,0, desc == "" and 38 or 20)
            Lbl.TextXAlignment = Enum.TextXAlignment.Left
            Lbl.TextYAlignment = Enum.TextYAlignment.Center
            if desc ~= "" then
                local DescLbl = Instance.new("TextLabel", Frame)
                DescLbl.Text = desc
                DescLbl.Font = Enum.Font.Gotham
                DescLbl.TextColor3 = theme.SubText
                DescLbl.TextSize = 12
                DescLbl.Position = UDim2.fromOffset(10,25)
                DescLbl.Size = UDim2.new(1,-60,0,20)
                DescLbl.BackgroundTransparency = 1
                DescLbl.TextXAlignment = Enum.TextXAlignment.Left
            end
            local Preview = Instance.new("Frame", Frame)
            Preview.Size = UDim2.fromOffset(20, 20)
            Preview.Position = UDim2.new(1, -40, 0.5, -10)
            Preview.BackgroundColor3 = Color
            Instance.new("UICorner", Preview).CornerRadius = UDim.new(0,4)
            local PickerFrame = Instance.new("Frame", Frame)
            PickerFrame.Size = UDim2.new(1, -10, 0, 150)
            PickerFrame.Position = UDim2.new(0,5,1,5)
            PickerFrame.BackgroundColor3 = theme.Sidebar
            PickerFrame.Visible = false
            Instance.new("UICorner", PickerFrame).CornerRadius = UDim.new(0,6)
            -- Add color picker logic, for simplicity use a placeholder
            local HueBar = Instance.new("Frame", PickerFrame)
            -- Implement full color picker with hue, saturation, value sliders
            -- For now, placeholder
            Frame.MouseButton1Click:Connect(function()
                PickerFrame.Visible = not PickerFrame.Visible
                Tween(Frame, {Size = PickerFrame.Visible and UDim2.new(1,-5,0,(desc == "" and 38 or 50)+160) or UDim2.new(1,-5,0,desc == "" and 38 or 50)})
            end)
            PickerFrame.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    Color = Color3.fromHSV(math.random(), 1, 1) -- Placeholder
                    Picker.Value = Color
                    Preview.BackgroundColor3 = Color
                    callback(Color)
                end
            end)
            function Picker:Set(col)
                Color = col
                Picker.Value = col
                Preview.BackgroundColor3 = col
            end
            return Picker
        end

        function Tab:AddInput(options)
            local text = options.Title or "Input"
            local desc = options.Description or ""
            local default = options.Default or ""
            local callback = options.Callback or function(v) end
            local flag = options.Flag or text
            local Value = default
            local InputObj = {Value = Value}
            Fluent.Options[flag] = InputObj
            local Frame = Instance.new("Frame", Page)
            Frame.BackgroundColor3 = theme.Item
            Frame.Size = UDim2.new(1, -5, 0, desc == "" and 38 or 50)
            Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 6)
            local Lbl = Instance.new("TextLabel", Frame)
            Lbl.Text = text
            Lbl.Font = Enum.Font.Gotham
            Lbl.TextColor3 = theme.Text
            Lbl.TextSize = 14
            Lbl.BackgroundTransparency = 1
            Lbl.Position = UDim2.fromOffset(10, desc == "" and 0 or 5)
            Lbl.Size = UDim2.new(0.5,0,0, desc == "" and 38 or 20)
            Lbl.TextXAlignment = Enum.TextXAlignment.Left
            Lbl.TextYAlignment = Enum.TextYAlignment.Center
            if desc ~= "" then
                local DescLbl = Instance.new("TextLabel", Frame)
                DescLbl.Text = desc
                DescLbl.Font = Enum.Font.Gotham
                DescLbl.TextColor3 = theme.SubText
                DescLbl.TextSize = 12
                DescLbl.Position = UDim2.fromOffset(10,25)
                DescLbl.Size = UDim2.new(0.5,0,0,20)
                DescLbl.BackgroundTransparency = 1
                DescLbl.TextXAlignment = Enum.TextXAlignment.Left
            end
            local Input = Instance.new("TextBox", Frame)
            Input.Size = UDim2.new(0.5, -10, 0, desc == "" and 28 or 40)
            Input.Position = UDim2.new(0.5, 5, desc == "" and 5 or 5)
            Input.BackgroundColor3 = theme.Sidebar
            Input.TextColor3 = theme.Text
            Input.Font = Enum.Font.Gotham
            Input.TextSize = 14
            Input.Text = Value
            Input.PlaceholderText = "Enter text..."
            Instance.new("UICorner", Input).CornerRadius = UDim.new(0,4)
            Input.FocusLost:Connect(function()
                Value = Input.Text
                InputObj.Value = Value
                callback(Value)
            end)
            function InputObj:Set(val)
                Value = val
                InputObj.Value = val
                Input.Text = val
            end
            return InputObj
        end

        function Tab:AddKeybind(options)
            local text = options.Title or "Keybind"
            local desc = options.Description or ""
            local default = options.Default or Enum.KeyCode.F
            local mode = options.Mode or "Toggle"  -- Hold, Toggle
            local callback = options.Callback or function(v) end
            local flag = options.Flag or text
            local Key = default
            local Keybind = {Value = Key}
            Fluent.Options[flag] = Keybind
            local Frame = Instance.new("Frame", Page)
            Frame.BackgroundColor3 = theme.Item
            Frame.Size = UDim2.new(1, -5, 0, desc == "" and 38 or 50)
            Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 6)
            local Lbl = Instance.new("TextLabel", Frame)
            Lbl.Text = text
            Lbl.Font = Enum.Font.Gotham
            Lbl.TextColor3 = theme.Text
            Lbl.TextSize = 14
            Lbl.BackgroundTransparency = 1
            Lbl.Position = UDim2.fromOffset(10, desc == "" and 0 or 5)
            Lbl.Size = UDim2.new(1,-80,0, desc == "" and 38 or 20)
            Lbl.TextXAlignment = Enum.TextXAlignment.Left
            Lbl.TextYAlignment = Enum.TextYAlignment.Center
            if desc ~= "" then
                local DescLbl = Instance.new("TextLabel", Frame)
                DescLbl.Text = desc
                DescLbl.Font = Enum.Font.Gotham
                DescLbl.TextColor3 = theme.SubText
                DescLbl.TextSize = 12
                DescLbl.Position = UDim2.fromOffset(10,25)
                DescLbl.Size = UDim2.new(1,-80,0,20)
                DescLbl.BackgroundTransparency = 1
                DescLbl.TextXAlignment = Enum.TextXAlignment.Left
            end
            local BindBtn = Instance.new("TextButton", Frame)
            BindBtn.Text = Key.Name
            BindBtn.Size = UDim2.fromOffset(60, 20)
            BindBtn.Position = UDim2.new(1, -70, 0.5, -10)
            BindBtn.BackgroundColor3 = theme.Sidebar
            BindBtn.TextColor3 = theme.Text
            BindBtn.Font = Enum.Font.Gotham
            BindBtn.TextSize = 12
            Instance.new("UICorner", BindBtn).CornerRadius = UDim.new(0,4)
            local binding = false
            BindBtn.MouseButton1Click:Connect(function()
                BindBtn.Text = "..."
                binding = true
            end)
            UserInputService.InputBegan:Connect(function(input)
                if binding and input.KeyCode ~= Enum.KeyCode.Unknown then
                    Key = input.KeyCode
                    Keybind.Value = Key
                    BindBtn.Text = Key.Name
                    binding = false
                    callback(Key)
                end
            end)
            -- Implement mode: Hold or Toggle
            local active = false
            UserInputService.InputBegan:Connect(function(input)
                if input.KeyCode == Key then
                    if mode == "Hold" then
                        active = true
                    elseif mode == "Toggle" then
                        active = not active
                    end
                    callback(active)
                end
            end)
            UserInputService.InputEnded:Connect(function(input)
                if mode == "Hold" and input.KeyCode == Key then
                    active = false
                    callback(active)
                end
            end)
            function Keybind:Set(newKey)
                Key = newKey
                Keybind.Value = newKey
                BindBtn.Text = newKey.Name
            end
            return Keybind
        end

        return Tab
    end

    function Window:Dialog(options)
        local title = options.Title or "Dialog"
        local content = options.Content or ""
        local buttons = options.Buttons or {"OK"}
        local callback = options.Callback or function(i) end
        local Dialog = Instance.new("Frame", Main)
        Dialog.Size = UDim2.fromOffset(300, 150)
        Dialog.Position = UDim2.fromScale(0.5,0.5)
        Dialog.AnchorPoint = Vector2.new(0.5,0.5)
        Dialog.BackgroundColor3 = theme.Main
        Instance.new("UICorner", Dialog).CornerRadius = UDim.new(0,10)
        Dialog.BackgroundTransparency = 1
        Tween(Dialog, {BackgroundTransparency = 0}, 0.3)
        -- Add title, content, buttons
        -- Close on button click, call callback with button index
    end

    return Window
end

return Fluent

-- DinoUI v5 - Ultra Premium Liquid Glass UI
-- Modern iOS-inspired UI Library with Advanced Features

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local CoreGui = game:GetService("CoreGui")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()
local RunService = game:GetService("RunService")
local HttpService = game:GetService("HttpService")

local Library = {}
Library.Config = {}
Library.Flags = {}
Library.Themes = {
    Dark = {
        Main = Color3.fromRGB(18, 18, 18),
        Sidebar = Color3.fromRGB(28, 28, 28),
        Item = Color3.fromRGB(32, 32, 32),
        Text = Color3.fromRGB(240, 240, 240),
        SubText = Color3.fromRGB(160, 160, 160),
        Outline = Color3.fromRGB(50, 50, 50),
        Accent = Color3.fromRGB(0, 140, 255)
    },
    Light = {
        Main = Color3.fromRGB(245, 245, 247),
        Sidebar = Color3.fromRGB(235, 235, 237),
        Item = Color3.fromRGB(255, 255, 255),
        Text = Color3.fromRGB(28, 28, 30),
        SubText = Color3.fromRGB(142, 142, 147),
        Outline = Color3.fromRGB(229, 229, 234),
        Accent = Color3.fromRGB(0, 122, 255)
    },
    Midnight = {
        Main = Color3.fromRGB(10, 10, 15),
        Sidebar = Color3.fromRGB(20, 20, 25),
        Item = Color3.fromRGB(30, 30, 40),
        Text = Color3.fromRGB(245, 245, 250),
        SubText = Color3.fromRGB(150, 150, 160),
        Outline = Color3.fromRGB(40, 40, 55),
        Accent = Color3.fromRGB(100, 200, 255)
    }
}

Library.CurrentTheme = "Dark"
Library.Accent = Library.Themes[Library.CurrentTheme].Accent
Library.Transparency = 0.95 -- Liquid glass effect
Library.BlurEnabled = true
Library.ConfigName = "DinoUI_Config"

-- [UTILITY FUNCTIONS] --
local function CreateGradient(colors)
    local grad = Instance.new("UIGradient")
    grad.Color = ColorSequence.new(colors)
    grad.Rotation = 45
    return grad
end

local function Tween(obj, props, time, style, direction)
    local tweenInfo = TweenInfo.new(
        time or 0.3,
        style or Enum.EasingStyle.Quart,
        direction or Enum.EasingDirection.Out,
        0,
        false,
        0
    )
    local tween = TweenService:Create(obj, tweenInfo, props)
    tween:Play()
    return tween
end

local function RippleEffect(button)
    local ripple = Instance.new("Frame")
    ripple.Size = UDim2.new(0, 0, 0, 0)
    ripple.Position = UDim2.new(0.5, 0, 0.5, 0)
    ripple.AnchorPoint = Vector2.new(0.5, 0.5)
    ripple.BackgroundColor3 = Color3.new(1, 1, 1)
    ripple.BackgroundTransparency = 0.8
    ripple.Parent = button
    Instance.new("UICorner", ripple).CornerRadius = UDim.new(1, 0)
    
    Tween(ripple, {
        Size = UDim2.new(2, 0, 2, 0),
        BackgroundTransparency = 1
    }, 0.5)
    
    task.delay(0.5, function()
        ripple:Destroy()
    end)
end

local function MakeDraggable(frame, dragHandle)
    local dragging, dragInput, dragStart, startPos
    local dragToggle = nil
    
    local function Update(input)
        local delta = input.Position - dragStart
        local newPos = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
        Tween(frame, {Position = newPos}, 0.05)
    end
    
    dragHandle.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    
    dragHandle.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            dragInput = input
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if dragging and input == dragInput then
            Update(input)
        end
    end)
end

-- [BLUR EFFECT] --
local function CreateBlurEffect(parent)
    if not Library.BlurEnabled then return end
    
    local blur = Instance.new("Frame")
    blur.Name = "BlurEffect"
    blur.Size = UDim2.new(1, 0, 1, 0)
    blur.BackgroundTransparency = 1
    blur.ZIndex = -10
    
    local gradient = Instance.new("UIGradient")
    gradient.Rotation = 90
    gradient.Transparency = NumberSequence.new({
        NumberSequenceKeypoint.new(0, 0.8),
        NumberSequenceKeypoint.new(1, 1)
    })
    gradient.Parent = blur
    
    local uiStroke = Instance.new("UIStroke")
    uiStroke.Thickness = 1
    uiStroke.Transparency = 0.8
    uiStroke.Color = Color3.new(1, 1, 1)
    uiStroke.Parent = blur
    
    blur.Parent = parent
    return blur
end

-- [NOTIFICATION SYSTEM ENHANCED] --
local NotifHolder
function Library:Notify(title, text, duration, notifType)
    if not NotifHolder then return end
    
    local colors = {
        Info = Color3.fromRGB(0, 122, 255),
        Success = Color3.fromRGB(52, 199, 89),
        Warning = Color3.fromRGB(255, 149, 0),
        Error = Color3.fromRGB(255, 59, 48)
    }
    
    local accent = colors[notifType or "Info"] or Library.Accent
    
    local Notif = Instance.new("Frame")
    Notif.Size = UDim2.fromOffset(320, 80)
    Notif.Position = UDim2.new(1, 10, 1, -90)
    Notif.BackgroundColor3 = Library.Themes[Library.CurrentTheme].Main
    Notif.BackgroundTransparency = Library.Transparency
    Notif.BorderSizePixel = 0
    Notif.Parent = NotifHolder
    
    local uiCorner = Instance.new("UICorner", Notif)
    uiCorner.CornerRadius = UDim.new(0, 14)
    
    local uiStroke = Instance.new("UIStroke", Notif)
    uiStroke.Color = Library.Themes[Library.CurrentTheme].Outline
    uiStroke.Thickness = 1
    uiStroke.Transparency = 0.3
    
    CreateBlurEffect(Notif)
    
    local Icon = Instance.new("ImageLabel", Notif)
    Icon.Size = UDim2.fromOffset(24, 24)
    Icon.Position = UDim2.fromOffset(20, 20)
    Icon.BackgroundTransparency = 1
    Icon.Image = "rbxassetid://10734949120" -- Default bell icon
    Icon.ImageColor3 = accent
    
    local Title = Instance.new("TextLabel", Notif)
    Title.Text = title
    Title.Font = Enum.Font.SourceSansSemibold
    Title.TextSize = 16
    Title.TextColor3 = Library.Themes[Library.CurrentTheme].Text
    Title.Position = UDim2.fromOffset(55, 18)
    Title.Size = UDim2.new(1, -70, 0, 22)
    Title.TextXAlignment = Enum.TextXAlignment.Left
    Title.BackgroundTransparency = 1
    
    local Desc = Instance.new("TextLabel", Notif)
    Desc.Text = text
    Desc.Font = Enum.Font.SourceSans
    Desc.TextSize = 14
    Desc.TextColor3 = Library.Themes[Library.CurrentTheme].SubText
    Desc.Position = UDim2.fromOffset(55, 40)
    Desc.Size = UDim2.new(1, -70, 0, 20)
    Desc.TextXAlignment = Enum.TextXAlignment.Left
    Desc.BackgroundTransparency = 1
    
    local CloseBtn = Instance.new("TextButton", Notif)
    CloseBtn.Text = "√ó"
    CloseBtn.Font = Enum.Font.GothamBold
    CloseBtn.TextSize = 20
    CloseBtn.TextColor3 = Library.Themes[Library.CurrentTheme].SubText
    CloseBtn.Size = UDim2.fromOffset(30, 30)
    CloseBtn.Position = UDim2.new(1, -35, 0, 10)
    CloseBtn.BackgroundTransparency = 1
    
    CloseBtn.MouseButton1Click:Connect(function()
        Tween(Notif, {
            Position = UDim2.new(1, 20, Notif.Position.Y.Scale, Notif.Position.Y.Offset),
            Size = UDim2.new(0, 0, 0, 0)
        }, 0.3)
        task.wait(0.3)
        Notif:Destroy()
    end)
    
    CloseBtn.MouseEnter:Connect(function()
        Tween(CloseBtn, {TextColor3 = Library.Themes[Library.CurrentTheme].Text}, 0.2)
    end)
    
    CloseBtn.MouseLeave:Connect(function()
        Tween(CloseBtn, {TextColor3 = Library.Themes[Library.CurrentTheme].SubText}, 0.2)
    end)
    
    -- Animation
    Notif.Size = UDim2.new(0, 0, 0, 0)
    Notif.Position = UDim2.new(1, 0, 1, -90)
    
    Tween(Notif, {
        Position = UDim2.new(1, -330, 1, -90 - (#NotifHolder:GetChildren()-1)*85),
        Size = UDim2.fromOffset(320, 80)
    }, 0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
    
    task.delay(duration or 4, function()
        if Notif and Notif.Parent then
            Tween(Notif, {
                Position = UDim2.new(1, 20, Notif.Position.Y.Scale, Notif.Position.Y.Offset),
                BackgroundTransparency = 1
            }, 0.5)
            task.wait(0.5)
            Notif:Destroy()
        end
    end)
end

-- [CONFIGURATION SYSTEM] --
function Library:SaveConfig(configName)
    local config = {}
    
    for flag, value in pairs(Library.Flags) do
        config[flag] = value
    end
    
    config.Theme = Library.CurrentTheme
    config.Accent = Library.Accent
    config.Transparency = Library.Transparency
    
    local json = HttpService:JSONEncode(config)
    
    if writefile then
        writefile(configName or Library.ConfigName .. ".json", json)
        Library:Notify("Success", "Configuration saved!", 3, "Success")
    else
        Library:Notify("Error", "Writefile not available", 3, "Error")
    end
end

function Library:LoadConfig(configName)
    if readfile then
        local success, result = pcall(function()
            local content = readfile(configName or Library.ConfigName .. ".json")
            return HttpService:JSONDecode(content)
        end)
        
        if success then
            for flag, value in pairs(result) do
                if Library.Flags[flag] ~= nil then
                    Library.Flags[flag] = value
                    -- Trigger callbacks if any
                end
            end
            
            if result.Theme then
                Library:ChangeTheme(result.Theme)
            end
            
            Library:Notify("Success", "Configuration loaded!", 3, "Success")
        else
            Library:Notify("Error", "Failed to load config", 3, "Error")
        end
    else
        Library:Notify("Error", "Readfile not available", 3, "Error")
    end
end

function Library:ExportConfig()
    local config = {}
    
    for flag, value in pairs(Library.Flags) do
        config[flag] = value
    end
    
    local json = HttpService:JSONEncode(config)
    setclipboard(json)
    Library:Notify("Success", "Config copied to clipboard!", 3, "Success")
end

function Library:ImportConfig()
    local success, result = pcall(function()
        local clipboard = getclipboard()
        return HttpService:JSONDecode(clipboard)
    end)
    
    if success then
        for flag, value in pairs(result) do
            if Library.Flags[flag] ~= nil then
                Library.Flags[flag] = value
            end
        end
        Library:Notify("Success", "Config imported!", 3, "Success")
    else
        Library:Notify("Error", "Invalid config data", 3, "Error")
    end
end

function Library:ChangeTheme(themeName)
    if Library.Themes[themeName] then
        Library.CurrentTheme = themeName
        Library.Accent = Library.Themes[themeName].Accent
        -- Update all UI elements with new theme
        Library:Notify("Theme Changed", "Switched to " .. themeName .. " theme", 2, "Info")
    end
end

-- [MAIN WINDOW] --
function Library:CreateWindow(settings)
    local Window = {}
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "DinoUIv5_" .. settings.Title or "PremiumUI"
    ScreenGui.DisplayOrder = 999
    ScreenGui.ResetOnSpawn = false
    
    if pcall(function() ScreenGui.Parent = CoreGui end) then 
    else 
        ScreenGui.Parent = LocalPlayer.PlayerGui 
    end

    -- Notification Holder
    NotifHolder = Instance.new("Frame", ScreenGui)
    NotifHolder.Size = UDim2.fromScale(1, 1)
    NotifHolder.BackgroundTransparency = 1
    NotifHolder.ClipsDescendants = true

    -- Main Container
    local Main = Instance.new("Frame", ScreenGui)
    Main.Size = UDim2.fromOffset(600, 450)
    Main.Position = UDim2.fromScale(0.5, 0.5)
    Main.AnchorPoint = Vector2.new(0.5, 0.5)
    Main.BackgroundColor3 = Library.Themes[Library.CurrentTheme].Main
    Main.BackgroundTransparency = Library.Transparency
    Main.ClipsDescendants = true
    
    local uiCorner = Instance.new("UICorner", Main)
    uiCorner.CornerRadius = UDim.new(0, 20)
    
    -- Glass Effect
    local glassEffect = Instance.new("Frame", Main)
    glassEffect.Size = UDim2.fromScale(1, 1)
    glassEffect.BackgroundColor3 = Color3.new(1, 1, 1)
    glassEffect.BackgroundTransparency = 0.95
    glassEffect.ZIndex = -1
    
    local glassCorner = Instance.new("UICorner", glassEffect)
    glassCorner.CornerRadius = UDim.new(0, 20)
    
    -- Shadow Effect
    local shadow = Instance.new("ImageLabel", Main)
    shadow.Size = UDim2.new(1, 50, 1, 50)
    shadow.Position = UDim2.fromOffset(-25, -25)
    shadow.Image = "rbxassetid://6014261999"
    shadow.ImageColor3 = Color3.new(0, 0, 0)
    shadow.ImageTransparency = 0.7
    shadow.BackgroundTransparency = 1
    shadow.ZIndex = -2
    shadow.ScaleType = Enum.ScaleType.Slice
    shadow.SliceCenter = Rect.new(49, 49, 450, 450)

    -- Gradient Border
    local border = Instance.new("Frame", Main)
    border.Size = UDim2.new(1, 2, 1, 2)
    border.Position = UDim2.fromOffset(-1, -1)
    border.BackgroundTransparency = 1
    border.ZIndex = -1
    
    local borderGradient = Instance.new("UIGradient", border)
    borderGradient.Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, Library.Accent),
        ColorSequenceKeypoint.new(0.5, Color3.fromRGB(255, 100, 200)),
        ColorSequenceKeypoint.new(1, Library.Accent)
    })
    borderGradient.Rotation = 45
    
    local borderMask = Instance.new("Frame", border)
    borderMask.Size = UDim2.new(1, -4, 1, -4)
    borderMask.Position = UDim2.fromOffset(2, 2)
    borderMask.BackgroundColor3 = Library.Themes[Library.CurrentTheme].Main
    borderMask.BackgroundTransparency = Library.Transparency
    
    Instance.new("UICorner", borderMask).CornerRadius = UDim.new(0, 19)

    -- Top Bar
    local TopBar = Instance.new("Frame", Main)
    TopBar.Size = UDim2.new(1, 0, 0, 50)
    TopBar.BackgroundTransparency = 1
    
    MakeDraggable(Main, TopBar)

    -- Title
    local Title = Instance.new("TextLabel", TopBar)
    Title.Text = settings.Title or "DinoUI v5"
    Title.Font = Enum.Font.SourceSansSemibold
    Title.TextColor3 = Library.Themes[Library.CurrentTheme].Text
    Title.TextSize = 20
    Title.Position = UDim2.fromOffset(25, 0)
    Title.Size = UDim2.new(0, 200, 1, 0)
    Title.BackgroundTransparency = 1
    Title.TextXAlignment = Enum.TextXAlignment.Left

    -- Control Buttons
    local Controls = Instance.new("Frame", TopBar)
    Controls.Size = UDim2.new(0, 120, 1, 0)
    Controls.Position = UDim2.new(1, -130, 0, 0)
    Controls.BackgroundTransparency = 1
    
    local uiList = Instance.new("UIListLayout", Controls)
    uiList.FillDirection = Enum.FillDirection.Horizontal
    uiList.HorizontalAlignment = Enum.HorizontalAlignment.Right
    uiList.Padding = UDim.new(0, 10)
    
    -- Theme Toggle Button
    local ThemeBtn = Instance.new("TextButton", Controls)
    ThemeBtn.Size = UDim2.fromOffset(32, 32)
    ThemeBtn.Text = "üåì"
    ThemeBtn.Font = Enum.Font.Gotham
    ThemeBtn.TextSize = 16
    ThemeBtn.TextColor3 = Library.Themes[Library.CurrentTheme].Text
    ThemeBtn.BackgroundColor3 = Library.Themes[Library.CurrentTheme].Item
    ThemeBtn.BackgroundTransparency = 0.8
    ThemeBtn.AutoButtonColor = false
    
    Instance.new("UICorner", ThemeBtn).CornerRadius = UDim.new(1, 0)
    
    ThemeBtn.MouseButton1Click:Connect(function()
        RippleEffect(ThemeBtn)
        local themes = {"Dark", "Light", "Midnight"}
        local currentIndex = table.find(themes, Library.CurrentTheme) or 1
        local nextIndex = currentIndex % #themes + 1
        Library:ChangeTheme(themes[nextIndex])
    end)

    -- Minimize Button
    local MinBtn = Instance.new("TextButton", Controls)
    MinBtn.Size = UDim2.fromOffset(32, 32)
    MinBtn.Text = "‚îÄ"
    MinBtn.Font = Enum.Font.GothamBold
    MinBtn.TextSize = 16
    MinBtn.TextColor3 = Library.Themes[Library.CurrentTheme].Text
    MinBtn.BackgroundColor3 = Library.Themes[Library.CurrentTheme].Item
    MinBtn.BackgroundTransparency = 0.8
    MinBtn.AutoButtonColor = false
    
    Instance.new("UICorner", MinBtn).CornerRadius = UDim.new(1, 0)
    
    local isMinimized = false
    MinBtn.MouseButton1Click:Connect(function()
        RippleEffect(MinBtn)
        isMinimized = not isMinimized
        if isMinimized then
            Tween(Main, {Size = UDim2.new(0, 600, 0, 50)}, 0.3)
            Tween(PageHolder, {Visible = false}, 0.2)
            Tween(Sidebar, {Visible = false}, 0.2)
            MinBtn.Text = "+"
        else
            Tween(Main, {Size = UDim2.fromOffset(600, 450)}, 0.3)
            task.wait(0.2)
            PageHolder.Visible = true
            Sidebar.Visible = true
            MinBtn.Text = "‚îÄ"
        end
    end)

    -- Close Button
    local CloseBtn = Instance.new("TextButton", Controls)
    CloseBtn.Size = UDim2.fromOffset(32, 32)
    CloseBtn.Text = "√ó"
    CloseBtn.Font = Enum.Font.GothamBold
    CloseBtn.TextSize = 20
    CloseBtn.TextColor3 = Color3.fromRGB(255, 59, 48)
    CloseBtn.BackgroundColor3 = Library.Themes[Library.CurrentTheme].Item
    CloseBtn.BackgroundTransparency = 0.8
    CloseBtn.AutoButtonColor = false
    
    Instance.new("UICorner", CloseBtn).CornerRadius = UDim.new(1, 0)
    
    CloseBtn.MouseButton1Click:Connect(function()
        RippleEffect(CloseBtn)
        Tween(Main, {
            Size = UDim2.new(0, 0, 0, 0),
            Position = UDim2.new(0.5, 0, 0.5, 0)
        }, 0.3)
        task.wait(0.3)
        ScreenGui:Destroy()
    end)

    -- Sidebar
    local Sidebar = Instance.new("Frame", Main)
    Sidebar.Size = UDim2.new(0, 160, 1, -60)
    Sidebar.Position = UDim2.fromOffset(15, 55)
    Sidebar.BackgroundColor3 = Library.Themes[Library.CurrentTheme].Sidebar
    Sidebar.BackgroundTransparency = 0.9
    
    Instance.new("UICorner", Sidebar).CornerRadius = UDim.new(0, 15)
    
    local SidebarList = Instance.new("UIListLayout", Sidebar)
    SidebarList.Padding = UDim.new(0, 8)
    Instance.new("UIPadding", Sidebar).PaddingTop = UDim.new(0, 12)

    -- Page Holder
    local PageHolder = Instance.new("Frame", Main)
    PageHolder.Size = UDim2.new(1, -190, 1, -60)
    PageHolder.Position = UDim2.fromOffset(185, 55)
    PageHolder.BackgroundTransparency = 1
    PageHolder.ClipsDescendants = true

    -- Config Buttons (Bottom Bar)
    local BottomBar = Instance.new("Frame", Main)
    BottomBar.Size = UDim2.new(1, -30, 0, 40)
    BottomBar.Position = UDim2.fromOffset(15, 400)
    BottomBar.BackgroundTransparency = 1
    
    local SaveBtn = Instance.new("TextButton", BottomBar)
    SaveBtn.Size = UDim2.new(0, 80, 1, 0)
    SaveBtn.Text = "üíæ Save"
    SaveBtn.Font = Enum.Font.SourceSansSemibold
    SaveBtn.TextSize = 14
    SaveBtn.TextColor3 = Library.Themes[Library.CurrentTheme].Text
    SaveBtn.BackgroundColor3 = Library.Accent
    SaveBtn.BackgroundTransparency = 0.2
    SaveBtn.AutoButtonColor = false
    
    Instance.new("UICorner", SaveBtn).CornerRadius = UDim.new(0, 10)
    
    SaveBtn.MouseButton1Click:Connect(function()
        RippleEffect(SaveBtn)
        Library:SaveConfig()
    end)

    local LoadBtn = Instance.new("TextButton", BottomBar)
    LoadBtn.Size = UDim2.new(0, 80, 1, 0)
    LoadBtn.Position = UDim2.new(0, 90, 0, 0)
    LoadBtn.Text = "üìÇ Load"
    LoadBtn.Font = Enum.Font.SourceSansSemibold
    LoadBtn.TextSize = 14
    LoadBtn.TextColor3 = Library.Themes[Library.CurrentTheme].Text
    LoadBtn.BackgroundColor3 = Library.Themes[Library.CurrentTheme].Item
    LoadBtn.BackgroundTransparency = 0.2
    LoadBtn.AutoButtonColor = false
    
    Instance.new("UICorner", LoadBtn).CornerRadius = UDim.new(0, 10)
    
    LoadBtn.MouseButton1Click:Connect(function()
        RippleEffect(LoadBtn)
        Library:LoadConfig()
    end)

    local ExportBtn = Instance.new("TextButton", BottomBar)
    ExportBtn.Size = UDim2.new(0, 80, 1, 0)
    ExportBtn.Position = UDim2.new(0, 180, 0, 0)
    ExportBtn.Text = "üì§ Export"
    ExportBtn.Font = Enum.Font.SourceSansSemibold
    ExportBtn.TextSize = 14
    ExportBtn.TextColor3 = Library.Themes[Library.CurrentTheme].Text
    ExportBtn.BackgroundColor3 = Library.Themes[Library.CurrentTheme].Item
    ExportBtn.BackgroundTransparency = 0.2
    ExportBtn.AutoButtonColor = false
    
    Instance.new("UICorner", ExportBtn).CornerRadius = UDim.new(0, 10)
    
    ExportBtn.MouseButton1Click:Connect(function()
        RippleEffect(ExportBtn)
        Library:ExportConfig()
    end)

    local ImportBtn = Instance.new("TextButton", BottomBar)
    ImportBtn.Size = UDim2.new(0, 80, 1, 0)
    ImportBtn.Position = UDim2.new(0, 270, 0, 0)
    ImportBtn.Text = "üì• Import"
    ImportBtn.Font = Enum.Font.SourceSansSemibold
    ImportBtn.TextSize = 14
    ImportBtn.TextColor3 = Library.Themes[Library.CurrentTheme].Text
    ImportBtn.BackgroundColor3 = Library.Themes[Library.CurrentTheme].Item
    ImportBtn.BackgroundTransparency = 0.2
    ImportBtn.AutoButtonColor = false
    
    Instance.new("UICorner", ImportBtn).CornerRadius = UDim.new(0, 10)
    
    ImportBtn.MouseButton1Click:Connect(function()
        RippleEffect(ImportBtn)
        Library:ImportConfig()
    end)

    -- Hover effects for all buttons
    for _, btn in pairs({SaveBtn, LoadBtn, ExportBtn, ImportBtn, ThemeBtn, MinBtn, CloseBtn}) do
        btn.MouseEnter:Connect(function()
            Tween(btn, {BackgroundTransparency = 0.1}, 0.2)
        end)
        
        btn.MouseLeave:Connect(function()
            Tween(btn, {BackgroundTransparency = 0.2}, 0.2)
        end)
    end

    -- Window Functions
    function Window:CreateTab(name, icon)
        local Tab = {}
        local TabBtn = Instance.new("TextButton", Sidebar)
        TabBtn.Text = "  " .. (icon or "üìã") .. "  " .. name
        TabBtn.Size = UDim2.new(1, -20, 0, 40)
        TabBtn.Position = UDim2.fromOffset(10, 0)
        TabBtn.BackgroundColor3 = Library.Themes[Library.CurrentTheme].Item
        TabBtn.BackgroundTransparency = 0.9
        TabBtn.TextColor3 = Library.Themes[Library.CurrentTheme].SubText
        TabBtn.Font = Enum.Font.SourceSansSemibold
        TabBtn.TextSize = 14
        TabBtn.TextXAlignment = Enum.TextXAlignment.Left
        TabBtn.AutoButtonColor = false
        
        Instance.new("UICorner", TabBtn).CornerRadius = UDim.new(0, 10)
        
        local Page = Instance.new("ScrollingFrame", PageHolder)
        Page.Size = UDim2.fromScale(1, 1)
        Page.BackgroundTransparency = 1
        Page.ScrollBarThickness = 3
        Page.ScrollBarImageColor3 = Library.Accent
        Page.ScrollBarImageTransparency = 0.5
        Page.Visible = false
        
        local PageList = Instance.new("UIListLayout", Page)
        PageList.Padding = UDim.new(0, 12)
        PageList:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
            Page.CanvasSize = UDim2.new(0, 0, 0, PageList.AbsoluteContentSize.Y + 20)
        end)
        
        Instance.new("UIPadding", Page).PaddingLeft = UDim.new(0, 5)
        Instance.new("UIPadding", Page).PaddingTop = UDim.new(0, 5)

        local isSelected = false
        
        TabBtn.MouseButton1Click:Connect(function()
            RippleEffect(TabBtn)
            
            for _, v in pairs(Sidebar:GetChildren()) do
                if v:IsA("TextButton") then
                    Tween(v, {
                        TextColor3 = Library.Themes[Library.CurrentTheme].SubText,
                        BackgroundTransparency = 0.9
                    }, 0.2)
                end
            end
            
            for _, p in pairs(PageHolder:GetChildren()) do
                if p:IsA("ScrollingFrame") then
                    p.Visible = false
                end
            end
            
            Tween(TabBtn, {
                TextColor3 = Library.Accent,
                BackgroundTransparency = 0.7
            }, 0.3)
            
            Page.Visible = true
            Page.Position = UDim2.new(0, 20, 0, 0)
            Page.Size = UDim2.new(1, -20, 1, 0)
            
            Tween(Page, {
                Position = UDim2.new(0, 0, 0, 0),
                Size = UDim2.fromScale(1, 1)
            }, 0.4, Enum.EasingStyle.Quart, Enum.EasingDirection.Out)
        end)

        TabBtn.MouseEnter:Connect(function()
            if not isSelected then
                Tween(TabBtn, {BackgroundTransparency = 0.8}, 0.2)
            end
        end)
        
        TabBtn.MouseLeave:Connect(function()
            if not isSelected then
                Tween(TabBtn, {BackgroundTransparency = 0.9}, 0.2)
            end
        end)

        -- Select first tab by default
        if #Sidebar:GetChildren() == 1 then
            task.wait(0.1)
            TabBtn:MouseButton1Click()
        end

        function Tab:AddButton(text, callback, icon)
            local Btn = Instance.new("TextButton", Page)
            Btn.Text = "  " .. (icon or "‚ö°") .. "  " .. text
            Btn.Size = UDim2.new(1, -10, 0, 42)
            Btn.BackgroundColor3 = Library.Themes[Library.CurrentTheme].Item
            Btn.BackgroundTransparency = 0.8
            Btn.TextColor3 = Library.Themes[Library.CurrentTheme].Text
            Btn.Font = Enum.Font.SourceSansSemibold
            Btn.TextSize = 14
            Btn.TextXAlignment = Enum.TextXAlignment.Left
            Btn.AutoButtonColor = false
            
            Instance.new("UICorner", Btn).CornerRadius = UDim.new(0, 12)
            
            local gradient = CreateGradient({
                ColorSequenceKeypoint.new(0, Library.Accent),
                ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 100, 200))
            })
            gradient.Enabled = false
            gradient.Parent = Btn
            
            Btn.MouseEnter:Connect(function()
                Tween(Btn, {BackgroundTransparency = 0.7}, 0.2)
                gradient.Enabled = true
            end)
            
            Btn.MouseLeave:Connect(function()
                Tween(Btn, {BackgroundTransparency = 0.8}, 0.2)
                gradient.Enabled = false
            end)
            
            Btn.MouseButton1Click:Connect(function()
                RippleEffect(Btn)
                Tween(Btn, {TextSize = 13}, 0.1)
                task.wait(0.1)
                Tween(Btn, {TextSize = 14}, 0.1)
                if callback then callback() end
            end)
        end

        function Tab:AddToggle(text, default, callback, flag)
            local Toggled = default or false
            if flag then Library.Flags[flag] = Toggled end
            
            local Frame = Instance.new("TextButton", Page)
            Frame.Text = ""
            Frame.BackgroundColor3 = Library.Themes[Library.CurrentTheme].Item
            Frame.BackgroundTransparency = 0.8
            Frame.Size = UDim2.new(1, -10, 0, 42)
            Frame.AutoButtonColor = false
            
            Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 12)
            
            local Label = Instance.new("TextLabel", Frame)
            Label.Text = text
            Label.Font = Enum.Font.SourceSansSemibold
            Label.TextColor3 = Library.Themes[Library.CurrentTheme].Text
            Label.TextSize = 14
            Label.BackgroundTransparency = 1
            Label.Position = UDim2.fromOffset(15, 0)
            Label.Size = UDim2.new(1, -70, 1, 0)
            Label.TextXAlignment = Enum.TextXAlignment.Left

            local Switch = Instance.new("Frame", Frame)
            Switch.Size = UDim2.fromOffset(44, 24)
            Switch.Position = UDim2.new(1, -54, 0.5, -12)
            Switch.BackgroundColor3 = Toggled and Library.Accent or Color3.fromRGB(60, 60, 70)
            Switch.BackgroundTransparency = 0.2
            
            Instance.new("UICorner", Switch).CornerRadius = UDim.new(1, 0)
            
            local Dot = Instance.new("Frame", Switch)
            Dot.Size = UDim2.fromOffset(18, 18)
            Dot.Position = Toggled and UDim2.new(1, -20, 0.5, -9) or UDim2.new(0, 3, 0.5, -9)
            Dot.BackgroundColor3 = Color3.new(1, 1, 1)
            Dot.BackgroundTransparency = 0.1
            
            Instance.new("UICorner", Dot).CornerRadius = UDim.new(1, 0)

            Frame.MouseButton1Click:Connect(function()
                RippleEffect(Frame)
                Toggled = not Toggled
                if flag then Library.Flags[flag] = Toggled end
                
                Tween(Switch, {
                    BackgroundColor3 = Toggled and Library.Accent or Color3.fromRGB(60, 60, 70)
                }, 0.2)
                
                Tween(Dot, {
                    Position = Toggled and UDim2.new(1, -20, 0.5, -9) or UDim2.new(0, 3, 0.5, -9)
                }, 0.2, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
                
                if callback then callback(Toggled) end
            end)
            
            Frame.MouseEnter:Connect(function()
                Tween(Frame, {BackgroundTransparency = 0.7}, 0.2)
            end)
            
            Frame.MouseLeave:Connect(function()
                Tween(Frame, {BackgroundTransparency = 0.8}, 0.2)
            end)
        end

        function Tab:AddSlider(text, min, max, default, callback, flag)
            local Value = default or min
            if flag then Library.Flags[flag] = Value end
            
            local Frame = Instance.new("Frame", Page)
            Frame.Size = UDim2.new(1, -10, 0, 60)
            Frame.BackgroundColor3 = Library.Themes[Library.CurrentTheme].Item
            Frame.BackgroundTransparency = 0.8
            
            Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 12)
            
            local Label = Instance.new("TextLabel", Frame)
            Label.Text = text
            Label.Font = Enum.Font.SourceSansSemibold
            Label.TextColor3 = Library.Themes[Library.CurrentTheme].Text
            Label.TextSize = 14
            Label.BackgroundTransparency = 1
            Label.Position = UDim2.fromOffset(15, 8)
            Label.Size = UDim2.new(1, -30, 0, 20)
            Label.TextXAlignment = Enum.TextXAlignment.Left

            local ValueLabel = Instance.new("TextLabel", Frame)
            ValueLabel.Text = tostring(Value)
            ValueLabel.Font = Enum.Font.SourceSansSemibold
            ValueLabel.TextColor3 = Library.Accent
            ValueLabel.TextSize = 14
            ValueLabel.BackgroundTransparency = 1
            ValueLabel.Position = UDim2.new(1, -40, 0, 8)
            ValueLabel.Size = UDim2.new(0, 30, 0, 20)
            ValueLabel.TextXAlignment = Enum.TextXAlignment.Right

            local Track = Instance.new("Frame", Frame)
            Track.Size = UDim2.new(1, -30, 0, 6)
            Track.Position = UDim2.fromOffset(15, 35)
            Track.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
            Track.BackgroundTransparency = 0.5
            
            Instance.new("UICorner", Track).CornerRadius = UDim.new(1, 0)
            
            local Fill = Instance.new("Frame", Track)
            Fill.Size = UDim2.new((Value - min) / (max - min), 0, 1, 0)
            Fill.BackgroundColor3 = Library.Accent
            Fill.BorderSizePixel = 0
            
            Instance.new("UICorner", Fill).CornerRadius = UDim.new(1, 0)
            
            local Dot = Instance.new("Frame", Track)
            Dot.Size = UDim2.fromOffset(16, 16)
            Dot.Position = UDim2.new((Value - min) / (max - min), -8, 0.5, -8)
            Dot.BackgroundColor3 = Color3.new(1, 1, 1)
            Dot.BackgroundTransparency = 0.1
            
            Instance.new("UICorner", Dot).CornerRadius = UDim.new(1, 0)
            
            local dragging = false
            
            local function Update(input)
                local pos = UDim2.fromScale(
                    math.clamp((input.Position.X - Track.AbsolutePosition.X) / Track.AbsoluteSize.X, 0, 1),
                    0.5
                )
                local value = math.floor(min + (max - min) * pos.X.Scale)
                
                if value ~= Value then
                    Value = value
                    if flag then Library.Flags[flag] = Value end
                    
                    ValueLabel.Text = tostring(Value)
                    Tween(Fill, {Size = UDim2.new(pos.X.Scale, 0, 1, 0)}, 0.1)
                    Tween(Dot, {Position = UDim2.new(pos.X.Scale, -8, 0.5, -8)}, 0.1)
                    
                    if callback then callback(Value) end
                end
            end
            
            Track.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    dragging = true
                    Update(input)
                end
            end)
            
            Track.InputEnded:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    dragging = false
                end
            end)
            
            UserInputService.InputChanged:Connect(function(input)
                if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
                    Update(input)
                end
            end)
            
            Frame.MouseEnter:Connect(function()
                Tween(Frame, {BackgroundTransparency = 0.7}, 0.2)
            end)
            
            Frame.MouseLeave:Connect(function()
                Tween(Frame, {BackgroundTransparency = 0.8}, 0.2)
            end)
        end

        function Tab:AddDropdown(text, options, default, callback, flag)
            local Selected = default or options[1]
            if flag then Library.Flags[flag] = Selected end
            
            local Frame = Instance.new("Frame", Page)
            Frame.BackgroundColor3 = Library.Themes[Library.CurrentTheme].Item
            Frame.BackgroundTransparency = 0.8
            Frame.Size = UDim2.new(1, -10, 0, 42)
            Frame.ClipsDescendants = true
            
            Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 12)
            
            local Btn = Instance.new("TextButton", Frame)
            Btn.Text = text .. " : " .. Selected
            Btn.Size = UDim2.new(1, 0, 0, 42)
            Btn.BackgroundTransparency = 1
            Btn.TextColor3 = Library.Themes[Library.CurrentTheme].Text
            Btn.Font = Enum.Font.SourceSansSemibold
            Btn.TextSize = 14
            Btn.TextXAlignment = Enum.TextXAlignment.Left
            Instance.new("UIPadding", Btn).PaddingLeft = UDim.new(0, 15)

            local Arrow = Instance.new("TextLabel", Frame)
            Arrow.Text = "‚ñº"
            Arrow.Size = UDim2.new(0, 30, 0, 42)
            Arrow.Position = UDim2.new(1, -30, 0, 0)
            Arrow.TextColor3 = Library.Themes[Library.CurrentTheme].SubText
            Arrow.Font = Enum.Font.Gotham
            Arrow.TextSize = 12
            Arrow.BackgroundTransparency = 1

            local Opened = false
            local ListHeight = #options * 36 + 5
            
            Btn.MouseButton1Click:Connect(function()
                RippleEffect(Btn)
                Opened = not Opened
                
                Tween(Frame, {
                    Size = Opened and UDim2.new(1, -10, 0, 42 + ListHeight) or UDim2.new(1, -10, 0, 42)
                }, 0.3, Enum.EasingStyle.Quart, Enum.EasingDirection.Out)
                
                Tween(Arrow, {
                    Rotation = Opened and 180 or 0
                }, 0.3)
            end)

            for i, v in ipairs(options) do
                local Opt = Instance.new("TextButton", Frame)
                Opt.Text = v
                Opt.Size = UDim2.new(1, -20, 0, 32)
                Opt.Position = UDim2.fromOffset(10, 45 + (i-1)*36)
                Opt.BackgroundColor3 = Library.Themes[Library.CurrentTheme].Sidebar
                Opt.BackgroundTransparency = 0.9
                Opt.TextColor3 = Library.Themes[Library.CurrentTheme].SubText
                Opt.Font = Enum.Font.SourceSans
                Opt.TextSize = 13
                Opt.AutoButtonColor = false
                
                Instance.new("UICorner", Opt).CornerRadius = UDim.new(0, 8)
                
                Opt.MouseButton1Click:Connect(function()
                    RippleEffect(Opt)
                    Opened = false
                    Selected = v
                    if flag then Library.Flags[flag] = Selected end
                    
                    Tween(Frame, {
                        Size = UDim2.new(1, -10, 0, 42)
                    }, 0.3, Enum.EasingStyle.Quart, Enum.EasingDirection.Out)
                    
                    Tween(Arrow, {
                        Rotation = 0
                    }, 0.3)
                    
                    Btn.Text = text .. " : " .. v
                    
                    if callback then callback(v) end
                end)
                
                Opt.MouseEnter:Connect(function()
                    Tween(Opt, {
                        BackgroundTransparency = 0.8,
                        TextColor3 = Library.Themes[Library.CurrentTheme].Text
                    }, 0.2)
                end)
                
                Opt.MouseLeave:Connect(function()
                    Tween(Opt, {
                        BackgroundTransparency = 0.9,
                        TextColor3 = Library.Themes[Library.CurrentTheme].SubText
                    }, 0.2)
                end)
            end
            
            Frame.MouseEnter:Connect(function()
                Tween(Frame, {BackgroundTransparency = 0.7}, 0.2)
            end)
            
            Frame.MouseLeave:Connect(function()
                Tween(Frame, {BackgroundTransparency = 0.8}, 0.2)
            end)
        end

        function Tab:AddTextBox(text, placeholder, callback, flag)
            local Frame = Instance.new("Frame", Page)
            Frame.Size = UDim2.new(1, -10, 0, 42)
            Frame.BackgroundColor3 = Library.Themes[Library.CurrentTheme].Item
            Frame.BackgroundTransparency = 0.8
            
            Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 12)
            
            local Label = Instance.new("TextLabel", Frame)
            Label.Text = text
            Label.Font = Enum.Font.SourceSansSemibold
            Label.TextColor3 = Library.Themes[Library.CurrentTheme].Text
            Label.TextSize = 14
            Label.BackgroundTransparency = 1
            Label.Position = UDim2.fromOffset(15, 0)
            Label.Size = UDim2.new(0.4, -10, 1, 0)
            Label.TextXAlignment = Enum.TextXAlignment.Left

            local Box = Instance.new("TextBox", Frame)
            Box.Size = UDim2.new(0.6, -20, 1, -10)
            Box.Position = UDim2.new(0.4, 5, 0, 5)
            Box.BackgroundColor3 = Library.Themes[Library.CurrentTheme].Sidebar
            Box.BackgroundTransparency = 0.9
            Box.TextColor3 = Library.Themes[Library.CurrentTheme].Text
            Box.Font = Enum.Font.SourceSans
            Box.TextSize = 14
            Box.PlaceholderText = placeholder or "Type here..."
            Box.PlaceholderColor3 = Library.Themes[Library.CurrentTheme].SubText
            Box.ClearTextOnFocus = false
            
            Instance.new("UICorner", Box).CornerRadius = UDim.new(0, 8)
            
            Box.Focused:Connect(function()
                Tween(Box, {BackgroundTransparency = 0.8}, 0.2)
            end)
            
            Box.FocusLost:Connect(function(enterPressed)
                Tween(Box, {BackgroundTransparency = 0.9}, 0.2)
                if enterPressed and callback then
                    if flag then Library.Flags[flag] = Box.Text end
                    callback(Box.Text)
                end
            end)
            
            Frame.MouseEnter:Connect(function()
                Tween(Frame, {BackgroundTransparency = 0.7}, 0.2)
            end)
            
            Frame.MouseLeave:Connect(function()
                Tween(Frame, {BackgroundTransparency = 0.8}, 0.2)
            end)
        end

        function Tab:AddLabel(text, color)
            local Label = Instance.new("TextLabel", Page)
            Label.Text = text
            Label.Font = Enum.Font.SourceSansSemibold
            Label.TextColor3 = color or Library.Themes[Library.CurrentTheme].Text
            Label.TextSize = 16
            Label.BackgroundTransparency = 1
            Label.Size = UDim2.new(1, -10, 0, 30)
            Label.TextXAlignment = Enum.TextXAlignment.Left
        end

        return Tab
    end

    -- Animation on open
    Main.Size = UDim2.new(0, 0, 0, 0)
    Main.BackgroundTransparency = 1
    
    Tween(Main, {
        Size = UDim2.fromOffset(600, 450),
        BackgroundTransparency = Library.Transparency
    }, 0.6, Enum.EasingStyle.Back, Enum.EasingDirection.Out)

    -- Keybinds
    UserInputService.InputBegan:Connect(function(input, gameProcessed)
        if not gameProcessed then
            if input.KeyCode == Enum.KeyCode.RightControl then
                Main.Visible = not Main.Visible
                Library:Notify("UI Toggled", Main.Visible and "UI is now visible" or "UI is now hidden", 2, "Info")
            elseif input.KeyCode == Enum.KeyCode.F1 then
                Library:SaveConfig()
            elseif input.KeyCode == Enum.KeyCode.F2 then
                Library:LoadConfig()
            end
        end
    end)

    return Window
end

-- Example usage:
--[[
local DinoUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/your-repo/DinoUI/main/source.lua"))()

local win = DinoUI:CreateWindow({
    Title = "DinoUI v5 - Premium"
})

local mainTab = win:CreateTab("Main", "üè†")
local settingsTab = win:CreateTab("Settings", "‚öôÔ∏è")

mainTab:AddButton("Test Button", function()
    DinoUI:Notify("Hello", "This is a notification!", 3, "Success")
end, "‚ö°")

mainTab:AddToggle("Enable Feature", false, function(state)
    print("Toggle:", state)
end, "feature_toggle")

mainTab:AddSlider("Volume", 0, 100, 50, function(value)
    print("Volume:", value)
end, "volume_slider")

mainTab:AddDropdown("Weapon", {"AK-47", "M4A1", "AWP", "Shotgun"}, "AK-47", function(selected)
    print("Selected:", selected)
end, "weapon_dropdown")

mainTab:AddTextBox("Player Name", "Enter username", function(text)
    print("Name:", text)
end, "player_name")

settingsTab:AddButton("Save Config", function()
    DinoUI:SaveConfig()
end)

settingsTab:AddButton("Load Config", function()
    DinoUI:LoadConfig()
end)
]]

return Library
